# Elastic Beanstalk environment configuration for connecting to an existing RDS database
option_settings:
  # AWS RDS environment configuration
  aws:elasticbeanstalk:application:environment:
    RDS_URL: jdbc:postgresql://${RDS_HOSTNAME}:${RDS_PORT}/${RDS_DB_NAME}
    RDS_USERNAME: ${RDS_USERNAME}
    RDS_PASSWORD: ${RDS_PASSWORD}
    SPRING_PROFILES_ACTIVE: production
    
  # Load balancer configuration
  aws:elasticbeanstalk:environment:
    EnvironmentType: SingleInstance
    ServiceRole: aws-elasticbeanstalk-service-role
    
  # Instance configuration
  aws:autoscaling:launchconfiguration:
    InstanceType: t2.micro
    IamInstanceProfile: aws-elasticbeanstalk-ec2-role
    
  # Deployment policy
  aws:elasticbeanstalk:command:
    DeploymentPolicy: Rolling
    BatchSizeType: Fixed
    BatchSize: 1
